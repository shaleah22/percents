<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Math Drill</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #level { position: absolute; top: 10px; right: 10px; font-size: 30px; font-weight: bold; }
        #question { margin-top: 40px; margin-bottom: 50px; font-size: 30px; }
        #questionContainer { margin-top: 90px; }
        #questionImage { max-width: 400px; max-height: 300px; width: auto; height: auto; display: block; margin: 0 auto; }
        .choice { margin: 10px 0; padding: 10px; font-size: 34px; border: 3px solid #ccc; cursor: pointer; }
        .choice:hover { background-color: #f0f0f0; }
    </style>
</head>
<body>
    <div class="container">
        <div id="quiz">
            <img id="questionImage" src="" alt="Question image" style="max-width: 50%; height: auto; margin-bottom: 15px; display: none;"/>
            <div id="level">Level: 1</div>
            <div id="question">Question goes here</div>
            <div id="choices"></div>
            <input id="inputBox" placeholder="Type your answer here" style="display: none;" type="text">
            <div id="feedback"></div>
        </div>
    </div>
    <script>
        let currentLevel = 1;
        let currentQuestionIndex = 0;
        let answerTimeout;
        
        function loadQuestion() {
            clearTimeout(answerTimeout);
            const question = questions[currentQuestionIndex];
            document.getElementById('question').innerHTML = question.question;

            if (question.imageUrl) {
                document.getElementById('questionImage').src = question.imageUrl;
                document.getElementById('questionImage').style.display = "block";
            } else {
                document.getElementById('questionImage').style.display = "none";
            }

            if (question.options) {
                loadChoiceQuestion(question);
            } else {
                loadInputQuestion(question);
            }

            answerTimeout = setTimeout(() => {
                alert(`The correct answer was: ${question.answer}`);
                document.getElementById('feedback').textContent = "Please enter or select the correct answer to proceed.";
            }, 400000);
        }

        function loadChoiceQuestion(question) {
            document.getElementById('inputBox').style.display = "none";
            const choicesContainer = document.getElementById('choices');
            choicesContainer.innerHTML = "";

            question.options.forEach(option => {
                const button = document.createElement('button');
                button.innerText = option;
                button.className = 'choice';
                button.onclick = () => checkAnswer(option);
                choicesContainer.appendChild(button);
            });
        }

        function loadInputQuestion(question) {
            document.getElementById('choices').innerHTML = "";
            document.getElementById('inputBox').style.display = "block";
            document.getElementById('inputBox').value = "";
            document.getElementById('inputBox').oninput = () => checkAnswer(document.getElementById('inputBox').value);
            document.getElementById('inputBox').focus();
        }

        function checkAnswer(userAnswer) {
            clearTimeout(answerTimeout);
            const correctAnswer = questions[currentQuestionIndex].answer;
            if (userAnswer.trim().toLowerCase() === correctAnswer.toLowerCase()) {
                document.getElementById('feedback').textContent = "Correct!";
                currentLevel++;
                document.getElementById("level").textContent = `Level: ${currentLevel}`;
                currentQuestionIndex = (currentQuestionIndex + 1) % questions.length;
                loadQuestion();
            } else {
                document.getElementById('feedback').textContent = "Incorrect. Please try again!";
            }
        }

        const questions = [
            { "question": "A store bought a table for $150 and marked it up by 40%. James earns a 15% commission on sales. How much commission did he make from selling the table?", "answer": "(1.4 × 150) × 0.15", "options": ["(1.4 × 150) × 0.15", "(1.5 × 150) × 0.15", "(1.4 × 150) × 0.2", "(1.4 × 150) × 0.1"] },
            { "question": "A store purchased a sofa for $500 and marked it up by 30%. Sarah earns a 12% commission on sales. How much commission did she make from selling the sofa?", "answer": "(1.3 × 500) × 0.12", "options": ["(1.25 × 500) × 0.12", "(1.3 × 500) × 0.12", "(1.3 × 500) × 0.1", "(1.3 × 500) × 0.15"] }
        ];

        loadQuestion();
    </script>
</body>
</html>
